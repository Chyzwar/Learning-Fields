import java.util.Arrays;


/**Golfer class
 * 
 * @author Kamontorn Khamrun H00144659
 *
 */
public class Golfer extends Competitor
{
	//variable
	//private int competitorNumber;
	//private Name competitorName;
	//private int[] listOfScores;
	private double overallScore;
	private String competitorLevel;
	private int competitorAge;
	private String competitorCountry;
	
	
	//constructor
	public Golfer(int cNumber, Name cName, int[] cScores, String cLevel, int cAge, String cCountry){
		super(cNumber,cName,cScores);
		//competitorNumber = cNumber;
		//competitorName = cName;
		//listOfScores = cScores;
		competitorLevel = cLevel;
		competitorAge = cAge;
		competitorCountry = cCountry;
		overallScore =  this.getOverallScore();//compute an overall score		
		
	}
	//returns competitor number
	/*public int getCompetitorNumber()
	{
		return competitorNumber;
	}*/
	//returns competitor level
	public String getCompetitorLevel()
	{
		//returns the capitalized in the first char 
		return Character.toUpperCase(competitorLevel.charAt(0)) + competitorLevel.substring(1);
	}
	//returns competitor name
	/*public Name getCompetitorName()
	{
		return competitorName;
	}*/
	//returns compettitor age
	public int getCompetitorAge()
	{
		return competitorAge;
	}
	//returns competitor country
	public String getCompetitorCountry()
	{
		return competitorCountry;
	}
	//returns score in a String format e.g. 3 4 1 3 4
	public String getAllScore(){
		//create a format of array score to display e.g. 3 4 1 3 4
				String score ="";
				for(int index=0; index < listOfScores.length ; index++)
				{
					if(index != listOfScores.length-1)
					{
						score += listOfScores[index]+" ";
					}
					else
					{
						score += listOfScores[index];
					}
				}
				return score;
				
	}
	
	
	//returns Array competitor scores
	/*public int[] getScore() {
		return listOfScores;
	}*/
	
	//calculates and returns an overall score by average of top n scores where n is the level number 
	//Rookie (n=1), Amateur (n=2), Pro (n=3)
	public double getOverallScore() {
		int level =0;
		int total = 0;
		int[] sortedScores =  new int[5];
		
		
		for(int index=0; index < listOfScores.length ; index++)
		{
			//Copy listOfScores to sortedScores
			sortedScores[index] = listOfScores[index];
		}
		
		Arrays.sort(sortedScores); //sort all scores into ascending order
		if (competitorLevel.equals("rookie"))
		{
			level = 1;
		}
		else if (competitorLevel.equals("amateur"))
		{
			level = 2;
		}
		else if (competitorLevel.equals("pro"))
		{
			level = 3;
		}
		
		
		
		for(int scoreIndex = sortedScores.length - 1 ; scoreIndex  >=  sortedScores.length - level ; scoreIndex--)
		{
			//adding top n scores where n is the level number
			//starting of the last index (the highest score) then index-1 continue n loops, n = level.
			total += sortedScores[scoreIndex];
			
		}
		//compute an overall score
		overallScore = (double)total/level;
		//format overallScore to 1 decimal place
		overallScore = Double.valueOf(String.format("%.1f",overallScore));
		
		return overallScore;
	}
	
	//returns a String of full competitor details
	public String getFullDetails() {
		//create a format of array scores to display e.g. 3,4,1,3,4
		String Score ="";
		for(int index=0; index < listOfScores.length ; index++)
		{
			if(index != listOfScores.length-1)
			{
				Score += listOfScores[index]+",";
			}
			else
			{
				Score += listOfScores[index];
			}
		}
		
		
		return "Full details for " + getId() + ":\r\nCompetitor number " + getId() + ", name " + getName() + ".\n"
				+ competitorName.getShortName() + " is a " + this.getCompetitorLevel() + " aged " + competitorAge
				+ " from " + competitorCountry + " and received these scores : "+ Score+ " which has an overall score of " + overallScore + ".";
	}
	
	//returns a String of short competitor details
	/*public String getShortDetails() {
		return "CN " + competitorNumber + " (" + competitorName.getInitial() + ") has overall score "
				+ overallScore + ".";
	}*/
}
